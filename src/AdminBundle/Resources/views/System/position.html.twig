{% extends 'AdminBundle:layout:default.html.twig' %}

{% block title %} default {% endblock %}
{% block body %}
	<link rel="stylesheet" type="text/css" href="http://localhost/formwork/bootstrap/page/assets/global/plugins/jstree/dist/themes/default/style.min.css">
    <!-- BEGIN PAGE CONTENT-->
 <div class="row">
    <div class="col-md-12">
    	<div class="portlet light">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-gift font-green-sharp"></i>
                    <span class="caption-subject font-green-sharp bold uppercase">添加职位</span>
                    <span class="caption-helper">help</span>
                </div>
            </div>
        
	        <div class="portlet-body form">
	        	{% form_theme form 'CommonBundle:Form:bootstrap.html.twig' %}
				{{ form_start(form, {'action': path('/admin/system/savePermission'), 'method': 'POST', 'attr': {'role': 'form'}}) }}
					<div class="form-body">
						<div class="form-group">
							{{ form_label(form.title, '职位名称') }}
							<div class="col-md-5">
								{{ form_widget(form.title) }}
								<span class="help-block">
								This is inline help </span>
								{{ form_errors(form.title) }}
							</div>
						</div>
						
						<div class="form-group">
							{{ form_label(form.isEnable, '是否启用') }}
							{{ form_widget(form.isEnable, {'attr': {'class': 'col-md-5'}}) }}
							{{ form_errors(form.isEnable) }}
						</div>
						
						
						<div class="form-group">
							<label class="col-md-2 control-label">分配权限</label>
							<div class="col-md-7">
								<ul class="list-unstyled">
									{% for item in permission.permissions('permissions') %}
									<li>
										<div class="checkbox-list">
											<label class="checkbox-inline">
											<input type="checkbox" id="inlineCheckbox1" value="{{ item.getId }}"> {{ item.getLabel }} </label>
										</div>
										{% for item1 in item.getChildren %}
										<ul class="list-unstyled">
											<li>
												<div class="checkbox-list">
													<label class="checkbox-inline">
													<input type="checkbox" id="inlineCheckbox1" value="{{ item1.getId }}"> {{ item1.getLabel }} </label>
												</div>
												<ul class="list-unstyled">
													<li>
														<div class="checkbox-list">
															{% for item2 in item1.getChildren %}
															<label class="checkbox-inline">
															<input type="checkbox" id="inlineCheckbox1" {% if item2.getStatus == 0 %} disabled {% endif %} value="{{ item2.getId }}"> {{ item2.getLabel }} </label>
															{% endfor %}
														</div>
													</li>
												</ul>
											</li>
										</ul>
										{% endfor %}
									</li>
									{% endfor %}
								</ul>
							</div>
						</div>
					</div>
					<div class="form-actions">
						<div class="row">
							<div class="col-md-offset-2 col-md-5">
								{{ form_label(form.save, '添加') }}
								{{ form_widget(form.save) }}
								<button type="reset" class="btn-default btn">Cancel</button>
							</div>
						</div>
					</div>
				{{ form_end(form)}}
	        </div>
	    </div>
	</div>
</div>
    <!-- END PAGE CONTENT-->
{% endblock %}

{% block javascripts %}
	<script type="text/javascript">
		require(['admin', 'vue', 'core'], function(Admin, Vue, Core) {
		    //console.log(Core);
		});
	</script>
{% endblock %}
